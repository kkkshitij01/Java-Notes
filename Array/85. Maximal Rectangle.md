Given a `rows x cols` binary `matrix` filled with `0`'s and `1`'s, find the largest rectangle containing only `1`'s and return _its area_.

**Example 1:**

![](https://assets.leetcode.com/uploads/2020/09/14/maximal.jpg)

**Input:** matrix = `[["1","0","1","0","0"],["1","0","1","1","1"],["1","1","1","1","1"],["1","0","0","1","0"]]`
**Output:** 6
**Explanation:** The maximal rectangle is shown in the above picture.

**Example 2:**

**Input:** matrix = `[["0"]]`
**Output:** 0

**Example 3:**

**Input:** matrix = `[["1"]]`
**Output:** 1


---
# Approach: 

• Input: `arr[][]` → a binary matrix of `'0'`s and `'1'`s.  
• Goal: Find the **largest rectangle of 1s** in the matrix.

---

• **Step 1: Convert matrix to histogram heights (`prefixSum`)**  
 – Create `ans[][]` → same size as `arr[][]`.  
 – Loop through each column `i`:  
  • Initialize `sum = 0`.  
  • Loop through each row `j`:  
   – If `arr[j][i] == '0'` → reset height → `ans[j][i] = 0` and `sum = 0`.  
   – Else (`arr[j][i] == '1'`) → increment height → `sum += 1` → `ans[j][i] = sum`.  
 – After this step, each row in `ans[][]` represents a **histogram of heights** up to that row.

---

• **Step 2: Find largest rectangle in a histogram (`maxRectangleInHistogram`)**  
 – Create a stack `sc` to store indices of bars.  
 – Initialize `maxArea = 0`.  
 – Loop through each index `i` from `0` to `ans.length` (inclusive extra iteration to flush stack):  
  • `currHeight = (i == ans.length) ? 0 : ans[i]`.  
  • While stack is not empty and `currHeight < ans[sc.peek()]`:  
   – Pop index → `height = ans[sc.pop()]`.  
   – Width = `sc.isEmpty() ? i : i - sc.peek() - 1`.  
   – Area = `height * width`.  
   – Update `maxArea = max(maxArea, area)`.  
  • Push current index `i` onto the stack.  
 – Return `maxArea` → largest rectangle area in this histogram.

---

• **Step 3: Maximal rectangle in the matrix (`maximalRectangle`)**  
 – Convert matrix to histogram heights → `ans = prefixSum(arr)`.  
 – Initialize `maxArea = 0`.  
 – For each row in `ans[][]`:  
  • Compute `area = maxRectangleInHistogram(ans[i])`.  
  • Update `maxArea = max(maxArea, area)`.  
 – Return `maxArea` → the largest rectangle of 1s in the binary matrix.

```java
class Solution {

    // Convert the binary matrix into histogram heights for each column
    public int[][] prefixSum(char arr[][]) {
        int ans[][] = new int[arr.length][arr[0].length];

        // Process each column
        for (int i = 0; i < arr[0].length; i++) {
            int sum = 0;

            // Process each row in the column
            for (int j = 0; j < arr.length; j++) {
                if (arr[j][i] == '0') { // Reset if '0' found
                    ans[j][i] = 0;
                    sum = 0;
                } else { // Increase height if '1'
                    sum += 1;
                    ans[j][i] = sum;
                }
            }
        }

        return ans;
    }

    // Find largest rectangle area in a histogram (1D array)
    public int maxRectangleInHistogram(int ans[]) {
        Stack<Integer> sc = new Stack<>(); // Stack to store indices
        int maxArea = 0;

        // Go through each bar plus one extra 0 to flush the stack
        for (int i = 0; i <= ans.length; i++) {
            int currHeight = (i == ans.length) ? 0 : ans[i];

            // Calculate area for bars taller than current
            while (!sc.isEmpty() && currHeight < ans[sc.peek()]) {
                int height = ans[sc.pop()]; // Height of the bar
                int width = sc.isEmpty() ? i : i - sc.peek() - 1; // Width between bars
                int area = height * width;
                maxArea = Math.max(area, maxArea); // Update max area
            }

            sc.push(i); // Push current index
        }

        return maxArea;
    }

    // Main function to find maximal rectangle in binary matrix
    public int maximalRectangle(char[][] arr) {
        int ans[][] = prefixSum(arr); // Convert matrix to histogram heights
        int maxArea = 0;

        // Check max rectangle for each row as a histogram
        for (int i = 0; i < arr.length; i++) {
            int area = maxRectangleInHistogram(ans[i]); // Max rectangle in this row
            maxArea = Math.max(area, maxArea); // Update overall max
        }

        return maxArea; // Return the largest rectangle area in the matrix
    }
}


```